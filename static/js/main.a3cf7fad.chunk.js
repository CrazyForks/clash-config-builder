(this["webpackJsonpclash-config-builder"]=this["webpackJsonpclash-config-builder"]||[]).push([[0],{167:function(e,t,n){e.exports=n(306)},172:function(e,t,n){},295:function(e,t,n){},306:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),o=n.n(c),i=(n(172),n(52)),s=n.n(i),u=(n(91),n(44)),l=n(37),p=(n(307),n(53)),f=n(156),m=(n(177),n(89)),v=n(116),b=n(29),d=(n(179),n(46)),y=n(71),h=n(88),O=n(157),x=n.n(O),E=n(158),g=n.n(E),j=function(e){var t=e.items,n=void 0===t?[]:t,a=e.onChange,c=void 0===a?function(){}:a,o=n.map((function(e){return r.a.createElement("div",{className:"menu-item",key:g()(),"data-id":e},e)}));return r.a.createElement(x.a,{options:{group:"shared",animation:150},onChange:c,className:"menu"},o)},k=(n(241),n(165)),w=(n(243),n(164).a.TextArea),C=function(e){var t=e.title,n=void 0===t?"":t,c=e.onClose,o=void 0===c?function(){}:c,i=e.visible,s=void 0!==i&&i,l=e.onChange,p=e.value,f=Object(a.useState)(p),m=Object(b.a)(f,2),v=m[0],d=m[1];return Object(a.useEffect)((function(){d(p)}),[p]),r.a.createElement(k.a,{title:n,placement:"right",onClose:o,visible:s,width:"70%"},r.a.createElement(w,{rows:30,onChange:function(e){return d(e.target.value)},value:v,onPressEnter:function(){}}),r.a.createElement(u.a,{className:"drawer-btn",type:"primary",onClick:function(){l(v)}},"Save"))};function P(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function S(e){var t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch(n){}return t}n(295);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=n(296),R=d.a.Header,G=d.a.Content,A=d.a.Sider,V=d.a.Footer,F="raw",J="subs",K="proxies",L=["DOMAIN-SUFFIX","DOMAIN-KEYWORD","DOMAIN","DOMAIN-SUFFIX","IP-CIDR","GEOIP","FINAL"];function M(e){var t=e.title,n=e.initValue,r=e.cacheKey,c=Object(a.useState)(n),o=Object(b.a)(c,2),i=o[0],s=o[1],u=Object(a.useState)(!1),l=Object(b.a)(u,2),p=l[0],f=l[1];return Object(a.useEffect)((function(){r&&P(r,i)})),{title:t,visible:p,value:i,onClose:function(){return f(!1)},onChange:function(e){f(!1),s(e)},setValue:s,setVisible:f}}var T=function(){var e=M({title:"Input raw config.yaml",initValue:S(F)||"",cacheKey:F}),t=e.setValue,n=e.setVisible,c=M({title:"Input subscriptions(.yaml) url line by line",initValue:S(J)||"",cacheKey:J}),o=c.setVisible,i=Object(a.useState)(!1),f=Object(b.a)(i,2),O=f[0],x=f[1],E=Object(a.useState)("0"),g=Object(b.a)(E,2),k=g[0],w=g[1],I=Object(a.useState)(S(K)||[]),T=Object(b.a)(I,2),U=T[0],B=T[1];Object(a.useEffect)((function(){P(K,U)}),[U]);var z=Object(a.useState)({}),H=Object(b.a)(z,2),X=H[0],Y=H[1];function W(){return(W=Object(v.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,t=c.value.split("\n"),e.next=5,h.all(t.map((function(e){return h.get("https://cloudcompute.lbyczf.com/proxy-content?url=".concat(encodeURIComponent(e)),{validateStatus:function(e){return!0}})})));case 5:n=e.sent,a=[],n.forEach((function(e){var t=e.data,n=void 0===t?"":t,r={};try{r=y.parse(n)}catch(i){}var c=r.Proxy,o=void 0===c?[]:c;a=a.concat(o)})),B(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),m.a.error({message:"Sync Error",description:e.t0.stack});case 14:x(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function q(){return(q=Object(v.a)(s.a.mark((function e(){var t,n,a,r,c,o,i,u,p,f,v,d,O,x,E,g,j,k,C,P,S,I,R,G,A,V,F,J,K,M;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=X.Proxy,n=void 0===t?[]:t,a=X["Proxy Group"],r=void 0===a?[]:a,c=X.Rule,o=void 0===c?[]:c,i=[],u=!0,p=!1,f=void 0,e.prev=5,v=s.a.mark((function e(){var t,n,a,r,c,o,u,p,f,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O.value,n=t.split(",").map((function(e){return e.trim()})),a=Object(b.a)(n,3),r=a[0],c=a[1],o=a[2],"RULE-SET"!==r){e.next=11;break}return e.next=6,h.get(c);case 6:u=e.sent,p=u.status,f=u.data,200===p&&(m=f.split("\n"),i=[].concat(Object(l.a)(i),Object(l.a)(m.map((function(e){var t=e.split(",").map((function(e){return e.trim()})),n=Object(b.a)(t,3),a=n[0],r=n[1],c=n[2];if(!L.includes(a))return null;var i="".concat(a,",").concat(r,",").concat(o);return"no-resolve"===c&&(i+=",no-resolve"),i})).filter((function(e){return e}))))),e.next=12;break;case 11:i=[].concat(Object(l.a)(i),[t]);case 12:case"end":return e.stop()}}),e)})),d=o[Symbol.iterator]();case 8:if(u=(O=d.next()).done){e.next=13;break}return e.delegateYield(v(),"t0",10);case 10:u=!0,e.next=8;break;case 13:e.next=19;break;case 15:e.prev=15,e.t1=e.catch(5),p=!0,f=e.t1;case 19:e.prev=19,e.prev=20,u||null==d.return||d.return();case 22:if(e.prev=22,!p){e.next=25;break}throw f;case 25:return e.finish(22);case 26:return e.finish(19);case 27:x=n.concat(U),E=[].concat(Object(l.a)(x.map((function(e){return e.name}))),Object(l.a)(r.map((function(e){return e.name}))),["DIRECT","REJECT","GLOBAL"]),g=!0,j=!1,k=void 0,e.prev=32,C=r.entries()[Symbol.iterator]();case 34:if(g=(P=C.next()).done){e.next=70;break}S=P.value,I=Object(b.a)(S,2),R=I[0],G=I[1],A=!0,V=!1,F=void 0,e.prev=42,J=G.proxies[Symbol.iterator]();case 44:if(A=(K=J.next()).done){e.next=53;break}if(M=K.value,E.includes(M)){e.next=50;break}return m.a.error({message:"Proxy Missing",description:"Group [".concat(G.name,"] contains a not exist proxy [").concat(M,"]")}),w(R+""),e.abrupt("return");case 50:A=!0,e.next=44;break;case 53:e.next=59;break;case 55:e.prev=55,e.t2=e.catch(42),V=!0,F=e.t2;case 59:e.prev=59,e.prev=60,A||null==J.return||J.return();case 62:if(e.prev=62,!V){e.next=65;break}throw F;case 65:return e.finish(62);case 66:return e.finish(59);case 67:g=!0,e.next=34;break;case 70:e.next=76;break;case 72:e.prev=72,e.t3=e.catch(32),j=!0,k=e.t3;case 76:e.prev=76,e.prev=77,g||null==C.return||C.return();case 79:if(e.prev=79,!j){e.next=82;break}throw k;case 82:return e.finish(79);case 83:return e.finish(76);case 84:D(y.stringify(N({},X,{Proxy:x,Rule:i})),"config.yaml");case 85:case"end":return e.stop()}}),e,null,[[5,15,19,27],[20,,22,26],[32,72,76,84],[42,55,59,67],[60,,62,66],[77,,79,83]])})))).apply(this,arguments)}Object(a.useEffect)((function(){var t={};try{t=y.parse(e.value)}catch(n){}Y(t||{})}),[e.value]);var Q=X["Proxy Group"],Z=void 0===Q?[]:Q,$=X.Proxy,_=void 0===$?[]:$,ee=Z.map((function(e,t){return r.a.createElement(p.a.Item,{key:t},e.name)})),te=[];k<Z.length&&(te=Z[1*k].proxies);var ne=["DIRECT","GLOBAL","REJECT"].concat(Object(l.a)(Z.map((function(e){return e.name}))),Object(l.a)(_.map((function(e){return e.name}))),Object(l.a)(U.map((function(e){return e.name})))).filter((function(e){return!te.includes(e)}));return r.a.createElement(d.a,{className:"main"},r.a.createElement(R,{className:"header"},r.a.createElement("div",{className:"logo"}),r.a.createElement(p.a,{theme:"dark",mode:"horizontal",selectedKeys:["1"],style:{lineHeight:"64px"}},r.a.createElement(p.a.Item,{key:"1"},"Proxy Group"),r.a.createElement(p.a.Item,{key:"2",onClick:function(){return n(!0)}},"Raw Config.yaml"),r.a.createElement(p.a.Item,{key:"3",onClick:function(){return o(!0)}},"Subscription"))),r.a.createElement(d.a,null,r.a.createElement(A,{width:200,style:{background:"#fff"}},r.a.createElement(p.a,{mode:"inline",selectedKeys:[k],onClick:function(e){return w(e.key)},style:{height:"100%",borderRight:0}},ee)),r.a.createElement(d.a,{style:{padding:"0 24px 24px"}},r.a.createElement(G,{className:"content"},r.a.createElement("div",{className:"list"},r.a.createElement("div",{className:"list-title"},"Proxies"),r.a.createElement(j,{items:te,onChange:function(e){if(e.length<=0)m.a.error({message:"Could not complete!",description:"Proxy Group shold have more than one proxies."});else{var n=X["Proxy Group"],a=void 0===n?[]:n;a[k].proxies=e;var r=y.stringify(N({},X,{"Proxy Group":a}));t(r)}}})),r.a.createElement("div",{className:"list"},r.a.createElement("div",{className:"list-title"},"More"),r.a.createElement(j,{items:ne,onChange:function(){}}))))),r.a.createElement(V,{className:"footer"},r.a.createElement(u.a,{className:"btn",loading:O,icon:"cloud-download",onClick:function(){return W.apply(this,arguments)}},"Sync Proxies"),r.a.createElement(u.a,{className:"btn",type:"primary",icon:"download",onClick:function(){return q.apply(this,arguments)}},"Download Profile")),r.a.createElement(C,e),r.a.createElement(C,c))};o.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.a3cf7fad.chunk.js.map